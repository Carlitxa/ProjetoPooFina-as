<!DOCTYPE html>
<html>
<head>
    <title>RelatÃ³rios</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    <h2>Sistema Financeiro</h2>
    <span class="dark-toggle" onclick="toggleDark()">ðŸŒ™</span>
</div>

<!-- CONTEÃšDO -->
<div class="page">
  <div class="card">

    <!-- TÃTULO DENTRO DA CAIXA -->
    <h2>ðŸ“ˆ RelatÃ³rios Financeiros</h2>
    <br>

    <p>
        <strong>Total de Receitas:</strong>
        <span class="valor-positivo">{{ total_r }} â‚¬</span>
    </p>

    <p>
        <strong>Total de Despesas:</strong>
        <span class="valor-negativo">{{ total_d }} â‚¬</span>
    </p>

    <p>
        <strong>Saldo Atual:</strong> {{ saldo }} â‚¬
    </p>

    <hr><br>

    <canvas id="despesasChart"></canvas>

    <br>
    <a href="/dashboard" class="btn btn-secondary">â¬… Voltar ao Painel</a>

  </div>
</div>

<!-- SCRIPT DARK MODE + GRÃFICO -->
<script>
function toggleDark(){
    document.body.classList.toggle("dark");
    localStorage.setItem(
        "darkMode",
        document.body.classList.contains("dark") ? "on" : "off"
    );
}

window.onload = function(){
    if(localStorage.getItem("darkMode") === "on"){
        document.body.classList.add("dark");
    }
};

new Chart(document.getElementById("despesasChart"), {
    type: "bar",
    data: {
        labels: {{ labels|tojson }},
        datasets: [{
            label: "Despesas (â‚¬)",
            data: {{ values|tojson }},
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: { beginAtZero: true }
        }
    }
});
</script>

</body>
</html>
