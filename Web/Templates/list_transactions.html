<!-- PÃ¡gina de listagem de transaÃ§Ãµes -->
<!-- Apresenta todas as transaÃ§Ãµes do utilizador com opÃ§Ãµes de ediÃ§Ã£o e remoÃ§Ã£o -->

<!DOCTYPE html>
<html>
<head>
    <title>TransaÃ§Ãµes</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<div class="navbar">
    <h2>Sistema Financeiro</h2>
    <span class="dark-toggle" onclick="toggleDark()">ğŸŒ™</span>
</div>

<div class="page">
  <div class="card">
    <h2>ğŸ“‹ Lista de TransaÃ§Ãµes</h2>

    <table>
        <tr>
            <th>ID</th>
            <th>DescriÃ§Ã£o</th>
            <th>Valor</th>
            <th>Data</th>
            <th>Categoria</th>
            <th>Tipo</th>
            <th>AÃ§Ãµes</th>
        </tr>
        {% for t in transacoes %}
        <tr>
            <td>{{ t.id }}</td>
            <td>{{ t.descricao }}</td>
            <td class="{{ 'valor-positivo' if t.tipo == 'receita' else 'valor-negativo' }}">
                {{ t.valor }} â‚¬
            </td>
            <td>{{ t.data }}</td>
            <td>{{ t.categoria.nome }}</td>
            <td>{{ t.tipo }}</td>
            <td>
                <a href="/edit_transaction/{{ t.id }}" class="btn btn-primary">âœï¸ Editar</a>
                <a href="/delete_transaction/{{ t.id }}" class="btn btn-danger"
                   onclick="return confirm('Eliminar esta transaÃ§Ã£o?');">
                   ğŸ—‘ Eliminar
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <a href="/dashboard" class="btn btn-secondary">â¬… Voltar</a>
  </div>
</div>

<script>
function toggleDark(){
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode",
      document.body.classList.contains("dark") ? "on" : "off");
}
window.onload=function(){
 if(localStorage.getItem("darkMode")==="on"){
   document.body.classList.add("dark");
 }
}
</script>

</body>
</html>
